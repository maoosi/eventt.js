{"version":3,"file":"eventt.mjs","sources":["../src/polyfills.js","../src/eventt.js"],"sourcesContent":["export default (() => {\n\n    // Object.assign()\n    if (typeof Object.assign != 'function') {\n        Object.assign = function(target, varArgs) { // .length of function is 2\n            'use strict';\n            if (target == null) { // TypeError if undefined or null\n                throw new TypeError('Cannot convert undefined or null to object');\n            }\n\n            var to = Object(target);\n\n            for (var index = 1; index < arguments.length; index++) {\n                var nextSource = arguments[index];\n\n                if (nextSource != null) { // Skip over if undefined or null\n                    for (var nextKey in nextSource) {\n                        // Avoid bugs when hasOwnProperty is shadowed\n                        if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                            to[nextKey] = nextSource[nextKey];\n                        }\n                    }\n                }\n            }\n            return to;\n        };\n    }\n\n    // .includes()\n    if (!Array.prototype.includes) {\n        Object.defineProperty(Array.prototype, 'includes', {\n            value: function(searchElement, fromIndex) {\n\n                // 1. Let O be ? ToObject(this value).\n                if (this == null) {\n                    throw new TypeError('\"this\" is null or not defined');\n                }\n\n                var o = Object(this);\n\n                // 2. Let len be ? ToLength(? Get(O, \"length\")).\n                var len = o.length >>> 0;\n\n                // 3. If len is 0, return false.\n                if (len === 0) {\n                    return false;\n                }\n\n                // 4. Let n be ? ToInteger(fromIndex).\n                //    (If fromIndex is undefined, this step produces the value 0.)\n                var n = fromIndex | 0;\n\n                // 5. If n â‰¥ 0, then\n                //  a. Let k be n.\n                // 6. Else n < 0,\n                //  a. Let k be len + n.\n                //  b. If k < 0, let k be 0.\n                var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\n                function sameValueZero(x, y) {\n                    return x === y || (typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y));\n                }\n\n                // 7. Repeat, while k < len\n                while (k < len) {\n                    // a. Let elementK be the result of ? Get(O, ! ToString(k)).\n                    // b. If SameValueZero(searchElement, elementK) is true, return true.\n                    // c. Increase k by 1.\n                    if (sameValueZero(o[k], searchElement)) {\n                        return true;\n                    }\n                    k++;\n                }\n\n                // 8. Return false\n                return false;\n            }\n        });\n    }\n\n    // .forEach()\n    if (!Array.prototype.forEach) {\n        \n        Array.prototype.forEach = function(callback/*, thisArg*/) {\n\n            var T, k;\n\n            if (this == null) {\n                throw new TypeError('this is null or not defined');\n            }\n\n            // 1. Let O be the result of calling toObject() passing the\n            // |this| value as the argument.\n            var O = Object(this);\n\n            // 2. Let lenValue be the result of calling the Get() internal\n            // method of O with the argument \"length\".\n            // 3. Let len be toUint32(lenValue).\n            var len = O.length >>> 0;\n\n            // 4. If isCallable(callback) is false, throw a TypeError exception.\n            // See: http://es5.github.com/#x9.11\n            if (typeof callback !== 'function') {\n                throw new TypeError(callback + ' is not a function');\n            }\n\n            // 5. If thisArg was supplied, let T be thisArg; else let\n            // T be undefined.\n            if (arguments.length > 1) {\n                T = arguments[1];\n            }\n\n            // 6. Let k be 0.\n            k = 0;\n\n            // 7. Repeat while k < len.\n            while (k < len) {\n\n                var kValue;\n\n                // a. Let Pk be ToString(k).\n                //    This is implicit for LHS operands of the in operator.\n                // b. Let kPresent be the result of calling the HasProperty\n                //    internal method of O with argument Pk.\n                //    This step can be combined with c.\n                // c. If kPresent is true, then\n                if (k in O) {\n\n                    // i. Let kValue be the result of calling the Get internal\n                    // method of O with argument Pk.\n                    kValue = O[k];\n\n                    // ii. Call the Call internal method of callback with T as\n                    // the this value and argument list containing kValue, k, and O.\n                    callback.call(T, kValue, k, O);\n                }\n                // d. Increase k by 1.\n                k++;\n            }\n            // 8. return undefined.\n        };\n    }\n\n})()\n","import './polyfills'\n\nclass Eventt {\n\n    /**\n        --- CORE ---\n    **/\n\n    constructor (options = {}) {\n    // instance constructor\n        this.options = {\n            intercept: options.intercept || false,\n            debug: options.debug || false\n        }\n\n        this.debug = this.options.debug\n        this.events = []\n\n        if (this.options.intercept) this._interceptNative()\n\n        return this\n    }\n\n    /**\n        --- API ---\n    **/\n\n    listen (type, selector, func, opts = null) {\n    // add events listeners\n        if (type !== undefined && selector !== undefined && typeof func === 'function') {\n            let types = this._toArray(type)\n            let selectors = this._toArray(selector)\n            let options = null\n\n            if (typeof opts === 'boolean') options = { capture: opts }\n            else if (typeof opts === 'object') options = opts\n\n            selectors.forEach((_selector) => {\n                let targets = typeof _selector === 'string' ?\n                    this._objToArray(document.querySelectorAll(_selector)) : this._toArray(_selector)\n\n                targets.forEach((_target) => {\n                    types.forEach((_type) => {\n\n                        let event = {\n                            targetElem: _target,\n                            eventType: _type,\n                            func: func,\n                            opts: options\n                        }\n\n                        this._addEvent(event)\n                        this.events.push(event)\n\n                        this._debug('info', `Add eventListener ${ _type } on ${ this._whichElement(_target) }.`)\n\n                    })\n                })\n            })\n        } else {\n            this._debug('error', 'Wrong parameters for the `listen()` method.')\n        }\n\n        return this\n    }\n\n    unlisten (type, selector = '*') {\n    // remove events listeners\n        if (type !== undefined) {\n            let types = this._toArray(type)\n            let selectors = this._toArray(selector)\n            let removables = []\n\n            this.events.forEach((_event) => {\n                let isTarget = this._isTarget(_event.targetElem, selectors)\n                let isType = this._isType(_event.eventType, types)\n\n                if (isTarget && isType) {\n                    removables.push(_event)\n                    this._removeEvent(_event)\n                    this._debug('info', `Remove eventListener ${ _event.eventType } on ${ this._whichElement(_event.targetElem) }.`)\n                }\n            })\n\n            this.events = this.events.filter(event => !removables.includes(event))\n        } else {\n            this._debug('error', 'Wrong parameters for the `unlisten()` method.')\n        }\n\n        return this\n    }\n\n    trigger (type, selector = '*') {\n    // trigger events listeners\n        if (type !== undefined && selector !== undefined) {\n            let types = this._toArray(type)\n            let selectors = this._toArray(selector)\n\n            this.events.forEach((_event) => {\n                let isTarget = this._isTarget(_event.targetElem, selectors)\n                let isType = this._isType(_event.eventType, types)\n\n                if (isTarget && isType) {\n                    this._triggerEvent(_event)\n                    this._debug('info', `Trigger eventListener ${ _event.eventType } on ${ this._whichElement(_event.targetElem) }.`)\n                }\n            })\n        } else {\n            this._debug('error', 'Wrong parameters for the `trigger()` method.')\n        }\n\n        return this\n    }\n\n    list (selector, callback) {\n    // list events listeners\n        if (selector !== undefined && callback !== undefined) {\n            let selectors = this._toArray(selector)\n            let eventsList = []\n\n            this.events.forEach((_event) => {\n                let isTarget = this._isTarget(_event.targetElem, selectors)\n\n                if (isTarget) {\n                    eventsList.push(_event)\n                    this._debug('info', `List eventListener ${ _event.eventType } on ${ this._whichElement(_event.targetElem) }.`)\n                }\n            })\n\n            callback.call(this, eventsList)\n        } else {\n            this._debug('error', 'Wrong parameters for the `get()` method.')\n        }\n\n        return this\n    }\n\n    /**\n        --- FUNCTIONS ---\n    **/\n\n    _interceptNative () {\n        let _addEventt = (target, type, func, options) => {\n            this._debug('info', `Native addEventListener ${ type } intercepted on ${ this._whichElement(target) }.`)\n            this.listen(type, target, func, options)\n        }\n        let _removeEventt = (target, type) => {\n            this._debug('info', `Native removeEventListener ${ type } intercepted on ${ this._whichElement(target) }.`)\n            this.unlisten(type, target)\n        }\n\n        if (typeof Element !== 'undefined') {\n            let e_addEventL = Element.prototype.addEventListener\n            Element.prototype.addEventListener = function(type, func, options) {\n                if (typeof options !== 'undefined' && typeof options.eventt !== 'undefined')\n                    e_addEventL.call(this, type, func, options)\n                else\n                    _addEventt(this, type, func, options)\n            }\n            let e_removeEventL = Element.prototype.removeEventListener\n            Element.prototype.removeEventListener = function(type, func, options) {\n                if (typeof options !== 'undefined' && typeof options.eventt !== 'undefined')\n                    e_removeEventL.call(this, type, func, options)\n                else\n                    _removeEventt(this, type)\n            }\n        }\n\n        if (typeof Window !== 'undefined') {\n            let w_addEventL = Window.prototype.addEventListener\n            Window.prototype.addEventListener = function(type, func, options) {\n                if (typeof options !== 'undefined' && typeof options.eventt !== 'undefined')\n                    w_addEventL.call(this, type, func, options)\n                else\n                    _addEventt(this, type, func, options)\n            }\n            let w_removeEventL = Window.prototype.removeEventListener\n            Window.prototype.removeEventListener = function(type, func, options) {\n                if (typeof options !== 'undefined' && typeof options.eventt !== 'undefined')\n                    w_removeEventL.call(this, type, func, options)\n                else\n                    _removeEventt(this, type)\n            }\n        }\n\n        if (typeof Document !== 'undefined') {\n            let d_addEventL = Document.prototype.addEventListener\n            Document.prototype.addEventListener = function(type, func, options) {\n                if (typeof options !== 'undefined' && typeof options.eventt !== 'undefined')\n                    d_addEventL.call(this, type, func, options)\n                else\n                    _addEventt(this, type, func, options)\n            }\n            let d_removeEventL = Document.prototype.removeEventListener\n            Document.prototype.removeEventListener = function(type, func, options) {\n                if (typeof options !== 'undefined' && typeof options.eventt !== 'undefined')\n                    d_removeEventL.call(this, type, func, options)\n                else\n                    _removeEventt(this, type)\n            }\n        }\n    }\n\n    _addEvent (event) {\n    // add event listener\n        event.targetElem.addEventListener(event.eventType, event.func, this._transformOptions(event.opts))\n    }\n\n    _removeEvent (event) {\n    // remove event listener\n        event.targetElem.removeEventListener(event.eventType, event.func, this._transformOptions(event.opts))\n    }\n\n    _transformOptions (options) {\n    // filter options\n        let _options = (typeof options === 'boolean') ? { capture: options } : (options || {})\n        return Object.assign({ eventt: true }, _options)\n    }\n\n    _whichElement (target) {\n    // return element info\n        return (typeof target.outerHTML !== 'undefined') ? target.outerHTML : String(target)\n    }\n\n    _triggerEvent (event) {\n    // trigger event\n        event.func.call(this)\n    }\n\n    _isTarget(target, selectors) {\n    // return true if target is part of selectors\n        if (selectors[0] === '*') return true\n        let found = false\n\n        selectors.forEach((selector) => {\n            let targets = typeof selector === 'string' ?\n                this._objToArray(document.querySelectorAll(selector)) : this._toArray(selector)\n\n            targets.forEach((el) => {\n                if (el === target) found = true\n            })\n        })\n\n        return found\n    }\n\n    _isType(type, types) {\n    // return true if type is part of types\n        return types[0] === '*' || types.includes(type)\n    }\n\n    _toArray (data) {\n    // convert the data passed to an array\n        return Array.isArray(data) ? data : [data]\n    }\n\n    _objToArray (obj) {\n    // convert the obj passed into an array\n        return Object.keys(obj).map(key => obj[key])\n    }\n\n    _debug (type, message) {\n    // log errors\n        if (this.debug) {\n            /* eslint-disable no-console */\n            console.debug(`> Eventt.js | ${ type } :: ${ message }`)\n        }\n    }\n\n}\n\nexport default (...args) => { return new Eventt(...args) }\n"],"names":["Object","assign","target","varArgs","TypeError","to","index","arguments","length","nextSource","nextKey","prototype","hasOwnProperty","call","Array","includes","defineProperty","searchElement","fromIndex","sameValueZero","x","y","isNaN","this","o","len","n","k","Math","max","abs","forEach","callback","T","O","kValue","Eventt","options","intercept","debug","events","_interceptNative","type","selector","func","opts","undefined","types","_toArray","selectors","capture","_selector","targets","_this","_objToArray","document","querySelectorAll","_target","_type","event","_addEvent","push","_debug","_whichElement","removables","_event","isTarget","_this2","_isTarget","targetElem","isType","_isType","eventType","_removeEvent","filter","_this3","_triggerEvent","eventsList","_this4","_addEventt","_this5","listen","_removeEventt","unlisten","Element","e_addEventL","addEventListener","eventt","e_removeEventL","removeEventListener","Window","w_addEventL","w_removeEventL","Document","d_addEventL","d_removeEventL","_transformOptions","_options","outerHTML","String","found","_this6","el","data","isArray","obj","keys","map","key","message","args"],"mappings":"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"}